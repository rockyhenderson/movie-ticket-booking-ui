<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="seatandpayment.css" />
    <script
      src="https://kit.fontawesome.com/b6b5f43622.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="top-menu">
      <div class="back-arrow-wrapper">
        <i id="back-icon" class="fa-solid fa-arrow-left"></i>
      </div>
      <div class="breadcrumber">
        <nav class="breadcrumb">
          <span class="breadcrumb-item completed" data-url="seating.html"
            >Seats</span
          >
          <span class="breadcrumb-divider">></span>
          <span class="breadcrumb-item active" data-url="checkoutlogin.html"
            >Details</span
          >
          <span class="breadcrumb-divider">></span>
          <span class="breadcrumb-item future-step" data-url="payment.html"
            >Payment</span
          >
        </nav>
      </div>

      <div class="countdown">
        <div class="countdown-label">Seats Reserved For</div>
        <div class="countdown-timer">Loading</div>
      </div>
    </div>

    <div class="details-box">
      <h2 class="details-title">Details</h2>

      <div
        style="
          margin-top: 5px;
          margin-bottom: 10px;
          display: flex;
          justify-content: center;
          color: grey;
        "
      >
        <i> Please choose how you want to proceed!</i>
      </div>
      <div class="details-buttons">
        <button class="details-button login-btn selected">Login</button>
        <button class="details-button guest-btn">Guest</button>
      </div>
      <div class="loginwrapper">
        <div class="output-divs">
          <!-- Login Div -->
          <div id="login-div" class="red-div">
            <form id="login-form">
              <!-- Social Login Buttons -->
              <!-- Divider and Email Section -->

              <label for="username">Username</label>
              <input
                type="text"
                id="username"
                name="username"
                placeholder="Enter your username"
                required
              />

              <label for="password">Password</label>
              <input
                type="password"
                id="password"
                name="password"
                placeholder="Enter your password"
                required
              />

              <!-- Remember Me Checkbox -->
              <label for="remember-me">
                <input type="checkbox" id="remember-me" />
                Remember Me
              </label>

              <button type="button" id="login-confirm">Login</button>

              <!-- Signup Link -->
              <p class="signup-link">
                <a href="#">Don't have an account? Sign up here</a>
              </p>
            </form>
            <div class="login-button-wrapper">
              <button type="button" class="social-login-button">
                <i class="fa-brands fa-google"></i> Login with Google
              </button>
              <button type="button" class="social-login-button">
                <i class="fa-brands fa-facebook-f"></i> Login with Facebook
              </button>
            </div>
          </div>

          <!-- Guest Div -->
          <div id="guest-div" class="hidden blue-div">
            <form id="guest-form">
              <label for="guest-email">Email</label>
              <input
                type="email"
                id="guest-email"
                name="email"
                placeholder="Enter your email"
                required
              />

              <label for="guest-age">Age</label>
              <input
                type="number"
                id="guest-age"
                name="age"
                placeholder="Enter your age"
                min="0"
                required
              />

              <button type="button" id="guest-confirm">
                Continue as Guest
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script>

      // Select buttons and divs
      const loginButton = document.querySelector(".login-btn");
      const guestButton = document.querySelector(".guest-btn");
      const loginDiv = document.getElementById("login-div");
      const guestDiv = document.getElementById("guest-div");

      // Function to handle button selection
      function handleButtonClick(
        selectedButton,
        otherButton,
        showDiv,
        hideDiv
      ) {
        selectedButton.classList.add("selected"); // Add selected style
        otherButton.classList.remove("selected"); // Remove selected style
        showDiv.classList.remove("hidden"); // Show selected div
        hideDiv.classList.add("hidden"); // Hide other div
      }

      // Set default state (Login selected by default)
      handleButtonClick(loginButton, guestButton, loginDiv, guestDiv);

      // Event listeners for button clicks
      loginButton.addEventListener("click", () => {
        handleButtonClick(loginButton, guestButton, loginDiv, guestDiv);
      });

      guestButton.addEventListener("click", () => {
        handleButtonClick(guestButton, loginButton, guestDiv, loginDiv);
      });

      // Back button functionality
      const backIcon = document.getElementById("back-icon");
      backIcon.addEventListener("click", () => {
        window.history.back(); // Navigate to the previous page
      });

      // Confirm button functionality
      const confirmButton = document.getElementById("login-confirm");
      confirmButton.addEventListener("click", () => {
        console.log("GOING TO NEXT PAGE");
        window.location.href = "payment.html";
      });

      // Breadcrumb navigation functionality
      function setupBreadcrumbNavigation() {
        const breadcrumbItems = document.querySelectorAll(".breadcrumb-item");

        breadcrumbItems.forEach((item) => {
          item.addEventListener("click", (e) => {
            const url = item.getAttribute("data-url");

            // Allow navigation only for completed steps
            if (item.classList.contains("completed") && url) {
              window.location.href = url; // Redirect if step is completed
            } else {
              e.preventDefault(); // Prevent default action
              alert("You can only navigate to previous steps.");
            }
          });
        });
      }

      guestconfirmButton = document.getElementById("guest-confirm");
      guestconfirmButton.addEventListener("click", () => {
        window.location.href = "payment.html";
        // You can redirect or handle other logic here
      });

      // Initialize breadcrumb navigation
      setupBreadcrumbNavigation();
    </script>
    <script src="booking.js"></script>
  </body>
</html>
